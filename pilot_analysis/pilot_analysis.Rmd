---
title: "Analysis of pilot study"
author: '[Guillermo Montero-Melis](http://www.biling.su.se/montero_melis_guillermo)'
date: '`r as.character(format(Sys.Date(), format="%d/%m/%Y"))`'
output: html_document
---

```{r setup, include=FALSE}
library(knitr)
library(ggplot2)
library(dplyr)
knitr::opts_chunk$set(echo = FALSE)
```

## Memory task

```{r cars}
memw <- read.csv("data_pilot_memory-task_wide.csv")
meml <- read.csv("data_pilot_memory-task_long.csv")
```

In this task, participants saw groups of four verbs flashed on the screen one after another.
After the fourth word, participants had to keep the words in memory for 6 seconds. After 6 seconds, they heard a beep, which provided the cue to repeat the four words they had just seen, in the exact same order.

We will call an **item** a set of four verbs (i.e., a quadruple). Items consist of either *arm-related verbs* (e.g., grab, dunk, lift, fold) or *leg-related verbs* (e.g., wander, step, stride, limp).

```{r include=FALSE}
table(unique(meml[, c("type", "verb")])$type)
```

Each participant carried out 4 blocks in which they had to memorize 28 items, 14 quadruples of arm-related, and 14 quadruples of leg-related verbs.
This means there were 56 verbs of each type.
What varied between the blocks was the time for which each word was shown (in seconds): 
`r sort(unique(memw$word_duration))`.
The time between the offset of a verb and the onset of the next verb was held constant at 0.4 seconds.

We will analyze the data in two ways:

1. By items or quadruples, counting an item as correct if all four verbs were remembered in the correct order
2. By verbs, by looking whether each individual verb in a quadruple was remembered.


### Analysis by items/quadruples

#### Nature of the data

Here is an example of the data set when analyzed by items:

```{r}
kable(head(memw[, c(3:5, 7:8, 10:13, 18:19)]))
```

A few columns are omitted here, but these are the most important ones.
The `score` column rates items (quadruples) as either correct if all verbs are remembered in the right order, or as wrong if some error is made by a participant.
The `error`  column contains abbreviations for the types of error coded for (following Shebani & PulvermÃ¼ller, 2013):

- *Omission* (O): At least one target word is omitted
- *Replacement* (R): One target word is replaced by a non-target word
- *Shift/transposition* (S): Two target words are shuffled
- *Addition* (A): This was not in the original. It is the case where none of the previous errors have occurred (all 4 target verbs were retrieved in the right order), but the participant added at least one more verb that is not a target.


#### Error rates by word duration

The goal was to find a setting of word duration that would leave participants at approximately 30% error rates in this control condition (see S&P, p.X).

The following figure shows mean error rates (red dots) and confidence intervals of by-subject means (red lines) for each word duration setting on the x-axis. The smaller grayish dots show actyal by-subject means.


```{r}
ppt_mean <- memw %>% 
  group_by(participant, block, word_duration) %>%
  summarise(error_rate = 1 - mean(score))
ylims <- c(0,1)
ggplot(ppt_mean, aes(x = word_duration, y = error_rate)) +
  stat_summary(fun.y = "mean", colour = "red", size = 1, geom = "point") +
  stat_summary(fun.data = "mean_cl_boot", colour = "red", size = 2) +
  geom_jitter(width = 20, height = 0, alpha = .4) +
  ylab("Error rate") + xlab("word duration (in ms)") +
  ylim(ylims)
```

The plot below now breaks down observations by the type of verbs (arm- vs leg-related):

```{r}
ppt_mean_ty <- memw %>% 
  group_by(participant, block, word_duration, type) %>%
  summarise(error_rate = 1 - mean(score))

ggplot(ppt_mean_ty, aes(x = word_duration, y = error_rate, colour = type)) +
  stat_summary(fun.y = "mean", size = 1, geom = "point") +
  stat_summary(fun.data = "mean_cl_boot", size = 2, position = position_dodge(width = 20)) +
  geom_jitter(width = 20, height = 0, alpha = .4) +
  ylab("Error rate") + xlab("word duration (in ms)") +
  ylim(ylims)
```

It seems like word duration had no effect on the error rates.


#### Error rates by block

Perhaps what is more important is the block number, e.g. because error rates dropped as participants proceded into the experiment.


```{r}
ggplot(ppt_mean, aes(x = block, y = error_rate)) +
  stat_summary(fun.y = "mean", colour = "red", size = 1, geom = "point") +
  stat_summary(fun.data = "mean_cl_boot", colour = "red", size = 2) +
  geom_jitter(width = .4, height = 0, alpha = .4) +
  ylab("Error rate") +
  ylim(ylims)
```

The plot below now breaks down observations by the type of verbs (arm- vs leg-related):

```{r}
ggplot(ppt_mean_ty, aes(x = block, y = error_rate, colour = type)) +
  stat_summary(fun.y = "mean", size = 1, geom = "point") +
  stat_summary(fun.data = "mean_cl_boot", size = 2, position = position_dodge(width = .5)) +
  geom_jitter(width = .4, height = 0, alpha = .4) +
  ylab("Error rate") + 
  ylim(ylims)
```


#### Participant variability

```{r}
ppt_mean_simp <- memw %>% 
  group_by(participant) %>%
  summarise(error_rate = 1 - mean(score))
ppt_mean_simp$participant <- factor(ppt_mean_simp$participant, levels = ppt_mean_simp$participant[order(ppt_mean_simp$error_rate)])
ggplot(ppt_mean_simp, aes(x = participant, y = error_rate)) +
  geom_bar(stat = "identity") +
  ylab("Error rate") +
  ylim(ylims)
```


Are error rates for the two types of verbs correlated (by participants)?

```{r}
ppt_mean_simp_type <- memw %>% 
  group_by(participant, type) %>%
  summarise(error_rate = 1 - mean(score))
ppt_mean_simp_type$participant <- factor(ppt_mean_simp_type$participant, levels = ppt_mean_simp$participant[order(ppt_mean_simp$error_rate)])
ggplot(ppt_mean_simp_type, aes(x = participant, y = error_rate)) +
  geom_bar(stat = "identity") +
  ylab("Error rate") + facet_grid(. ~ type) +
  ylim(ylims)
```

