Workflow for data coding
========================

Files in `pilot_analysis/data_coding/`
--------------------------------

The folder `pilot_analysis/data_coding/` contains csv data files that either 
- need to be coded (filename starts with "TOCODE"),
- are coded (filename starts with "CODED"), or
- are being coded (filename starts with "CODING").

The format of any filename is thus `<coding-status>_<participantID>_<experiment-name>.csv`.
Note that for the pilot we will mainly be coding the files generated by the experiment "sheb_replic_pilot_control".


Workflow for data coding for the pilot in June 2018
-------------------------------------------

We will code in any program that supports spreadsheets, such as Excel or its equivalent open/free version (henceforth SP for spreadsheet program). How you execute some of the steps below might be specific to the very program you are using, but they are all supported.

### When you start coding the data from a new participant

1. Open a new file in your SP;
2. Select the "Import data from text" (or equivalent) option from your SP;
3. Choose the data file you are going to start coding; it should be of the form `TOCODE_<participantID>_<experiment-name>.csv`
4. In the menu that shows up, select for file origin encoding (or equivalent) the option "Unicode (UTF-8)"; for original data type choose "Delimited"; as delimiters, choose "Comma"
5. Check the spreadsheet looks as it should (data divided in columns with sensible names, no strange-looking characters).
6. Fill in your initials in the first row of the last column `coder` (e.g., GMM).
7. Directly save this spreadsheet into the same folder `pilot_analysis/data_coding/`, but changing its name to `CODING_<participantID>_<experiment-name>.csv` (participantID and experiment-name are the same as in the "TOCODE" version of the file). Use the "Save As" option and be sure to save the file as a CSV (comma-separated values) file; if your software allows choosing the file encoding, choose "Unicode (UTF-8)"
8. Do a `git push` -- this will prevent someone else in the team from starting to code the same data as you!
9. Now you are ready to start coding!


### Coding the data

NB:
- Make sure you open the sound file for the right participant;
- A program like Audacity (which can be downloaded for free) shows where there is sound in the file (shows up as waves), so it will be easier to navigate the sound file.
- Save frequently while coding to avoid losing work!


#### Columns that need to be coded

For `sheb_replic_pilot_control`, there are the following columns:

- `w1` through `w4`: 1 if the corresponding target word (word1 for w1, etc.) is mentioned -- *independent* of the order in which it is mentioned! -- otherwise 0.
- `error`: This column contains information about what errors (if any) were made when retrieving the words; here we follow the coding used in the original (S&P2013), abbreviating with the first letter only: O = omission, R = replacement, S = shift/transposition, and we add the error type "A" for additions (see below for a short characterization of each error type). Please always code in that same order (O->R->S->A) and separate multiple errors by a comma (e.g. "R,S")
- `score`: this column is left blank (it will be filled in by a script as a function of `error`)
- `comment`: Write in any comment that might seem relevant; for example, if the participants hesitates a lot. Take note of any coding difficulty you notice, so we can discuss it later.


For `verb_translation_oral-input`, code the following columns:

- `ppt_translation`: the participant response; if they give several alternatives, write them separated by commas, e.g. "knuffa, trycka"; you don't need to transcribe long digressions, just note if they say they don't know it.
- `score`: One of 1, 0 or -99. Code 1 if they say our target translation, or a complete synonym that means the same thing, or if they describe it exactly in a way that conveys that they really know the word; code 0 if they say another word or express that they don't know; code -99 if you are uncertain and would need a second opinion.
- `comment`: add any relevant comment about the trial.



#### Types of errors

The first three error types were in the original study (Shebani & Pulvermüller, 2013); "additions" were not.

- Omission (O): At least one target word is omitted
- Replacement (R): One target word is replaced by a non-target word
- Shift/transposition (S): Two target words are shuffled
- Addition (A): This was not in the original. It is the case where none of the previous errors have occurred (all 4 target verbs were retrieved in the right order), but the participant added at least one more verb that is not a target.


### Once you are done with coding

- When all trials of the experiment are coded, save the spreadsheet into the same folder (`pilot_analysis/data_coding/`), but change its name to 
`CODED_<participantID>_<experiment-name>.csv`
-  Now is a good moment to do a `git push`



Workflow for data coding for verb norming -- Sept 2018
-------------------------------------------

### Overview

NB: **The data for verb norming is found in the folder
`norming_1809_analysis/data_coding/`!**

The workflow is broadly similar to the one for the pilot in June 2018. The main
difference is that we only have one task that needs to be translated and
manually coded this time, namely the translation of L2 English verb to Swedish
by native Swedish speakers. This will allow us to evaluate if the verbs are
known to L2 speakers.

We will proceed in two *distinct* (and sequential) steps:

1) Transcribe the translation provided by the participants.
2) Once 1 is done for all participants, score each unique translation of a verb
as either right or wrong (with some intermediate options, see below).

Step 2 will be done independently by two native speakers of Swedish, so that we
can assess inter-rater agreement.

NB: In the instructions below, SP = spreadsheet program, e.g. Excel.


### Transcribing participant translations of L2 English verbs to Swedish

Do as follows:

1. Open a new blank file in your SP
2. Select the "Import data from text" (or equivalent) option from your SP;
3. Choose the data file you are going to start transcribing; it should be of
the form `TOCODE_<participantID>_L2-eng_oral_translation.csv`
4. In the menu that shows up, select for file origin encoding (or equivalent)
the option "Unicode (UTF-8)"; for original data type choose "Delimited"; as
delimiters, choose "Comma"
5. Check the spreadsheet looks as it should: data divided into columns with
sensible names, no strange-looking characters, etc.
6. Directly save this spreadsheet into the same folder, but changing its name
to `CODING_<participantID>_<experiment-name>.csv`. Use the "Save As" option and
be sure to save the file as a CSV (comma-separated values) file; if your 
software allows choosing the file encoding, choose "Unicode (UTF-8)"
7. Keep also a version in a native format of your SP (e.g., `.xlsx` for Excel);
this is just to have at least one working version of the document in case we
run into character encoding problems.
8. Now you are ready to start transcribing!

For transcription:

- Make sure you open the sound file for the right participant
- Save frequently while coding to avoid losing work!
- The main column is `translation_simple`. Write here the target answer provided
by the participant. E.g., if they say "Ja, 'totter', det betyder nog... ja...
promenera", then just write 'promenera' in that column (without quotation marks).
If they give two alternatives, write the two in the order provided and separated
by commas.
- The column `translation_details` should only be used when `translation_simple`
is not sufficient to provide all necessary information. For example, if a
participant is really hesitant and repeatedly says so, that is something one
might include in this column. Do not write anything here if it does not add
relevant information to `translation_simple`.
- Use the `comment` column if you have any additional comment on the participant's
response. If, for instance, the participant says that they did something
wrong (e.g., mixed up the numbers in the rating task), you can write it here.
Do not use this column to transcribe what the participant said, but rather your
comment or remarks concerning what they said.


### Scoring translations

I this second step, you will score the *unique translations* provided by all
participants. This means that, instead of going response through response, we
will have created a CSV file where, for each English target verb, there are as
many distinct rows as there are distinct translations provided by the 
participants. You will score each of those translations.

To do that:

1. Open the file
`norming_1809_analysis/data_coding/eng-swe_translation_key_DO-NOT-SCORE-HERE.csv`
in your SP of choice (be aware of the potential character encoding issues raised
above).
2. Save the file immediately into the same folder, giving it the name
`eng-swe_translation_key_<your initials>` (e.g., `eng-swe_translation_key_GMM`)
3. Save always two versions of the file, one using a native format of your SP
and another as a CSV file with "UTF-8" encoding (it is only the latter you will
push to github if you're using git); this is to ensure we have at least one
working version of the document in case we run into character encoding problems.
4. Write your initials in the first row of the `coder` column
5. Now score each row according to the following scoring scheme...

**Scoring scheme**:

- 1 = Correct translation
- 0 = Incorrect translation
- 0.5 = Partly correct but underspecified (e.g., 'gå' for 'lumber')
- -99 = You cannot decide; in this case you *need* to provide a comment in the
`score_comment` column



File encoding issues
--------------------

Special characters like Swedish umlauts can create problems when you open files which either expect, or by default use, different encoding conventions. It is good practice to use "UTF-8" (or Unicode) encoding. However, Excel will expect input in Western (Windows 1252) and it will save files in that format unless told to do otherwise.

To find out the encoding of a specific file:

a) Open the file in Sublime Text
b) Click on View > Show Console
c) A small white console shows up at the bottom of the screen.
d) In the lowest row (the one that accepts written input), type in the command "view.encoding()" and press return
e) Sublime will tell you the encoding of the file
f) Use this information when you open the file in Excel, i.e. if the file encoding is Western (Windows 1252), then use this option when you import the file as text in Excel (see Step 4 above under "When you start coding the data from a new participant" -- in Excel it might show up as "1252: Western European (Windows)")
g) You can also, in Sublime, go to File > Save with encoding > UTF-8. That will save the file in UTF-8 format

NB: For some reason the data files in `analysis/data_coding/`, which are created with the R script `analysis/pilot-data_preprocess.R`, are not recognized by Sublime as being encoded in UTF-8 format, even though the R-script does specify that. GMM doesn't understand why, so let us just be pragmatic about this:

Make sure that the final coded version of the data is in "UTF-8". Follow step g) in the list here above to achieve it.
