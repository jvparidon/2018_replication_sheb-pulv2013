Workflow for data coding
========================

Files in `analysis/data_coding/`
--------------------------------

The folder `analysis/data_coding/` contains csv data files that either 
- need to be coded (filename starts with "TOCODE"),
- are coded (filename starts with "CODED"), or
- are being coded (filename starts with "CODING").

The format of any filename is thus `<coding-status>_<participantID>_<experiment-name>.csv`.
Note that for the pilot we will mainly be coding the files generated by the experiment "sheb_replic_pilot_control".

Workflow
--------

We will code in any program that supports spreadsheets, such as Excel or its equivalent open/free version (henceforth SP for spreadsheet program). How you execute some of the steps below might be specific to the very program you are using, but they are all supported.

### When you start coding the data from a new participant

1. Open a new file in your SP;
2. Select the "Import data from text" (or equivalent) option from your SP;
3. Choose the data file you are going to start coding; it should be of the form `TOCODE_<participantID>_<experiment-name>.csv`
4. In the menu that shows up, select for file origin encoding (or equivalent) the option "Unicode (UTF-8)"; for original data type choose "Delimited"; as delimiters, choose "Comma"
5. Check the spreadsheet looks as it should (data divided in columns with sensible names, no strange-looking characters).
6. Fill in your initials in the first row of the last column `coder` (e.g., GMM).
7. Directly save this spreadsheet into the same folder `analysis/data_coding/`, but changing its name to `CODING_<participantID>_<experiment-name>.csv` (participantID and experiment-name are the same as in the "TOCODE" version of the file). Use the "Save As" option and be sure to save the file as a CSV (comma-separated values) file; if your software allows choosing the file encoding, choose "Unicode (UTF-8)"
8. Do a `git push` -- this will prevent someone else in the team from starting to code the same data as you!
9. Now you are ready to start coding!


### Coding the data

NB:
- Make sure you open the sound file for the right participant;
- A program like Audacity (which can be downloaded for free) shows where there is sound in the file (shows up as waves), so it will be easier to navigate the sound file.
- Save frequently while coding to avoid losing work!


#### Columns that need to be coded

For `sheb_replic_pilot_control`, there are the following columns:

- `w1` through `w4`: 1 if the corresponding target word (word1 for w1, etc.) is mentioned -- *independent* of the order in which it is mentioned! -- otherwise 0.
- `error`: This column contains information about what errors (if any) were made when retrieving the words; here we follow the coding used in the original (S&P2013), abbreviating with the first letter only: O = omission, R = replacement, S = shift/transposition, and we add the error type "A" for additions (see below for a short characterization of each error type). Please always code in that same order (O->R->S->A) and separate multiple errors by a comma (e.g. "R,S")
- `score`: this column is left blank (it will be filled in by a script as a function of `error`)
- `comment`: Write in any comment that might seem relevant; for example, if the participants hesitates a lot. Take note of any coding difficulty you notice, so we can discuss it later.

#### Types of errors

The first three error types were in the original study (Shebani & Pulverm√ºller, 2013); "additions" were not.

- Omission (O): At least one target word is omitted
- Replacement (R): One target word is replaced by a non-target word
- Shift/transposition (S): Two target words are shuffled
- Addition (A): This was not in the original. It is the case where none of the previous errors have occurred (all 4 target verbs were retrieved in the right order), but the participant added at least one more verb that is not a target.


### Once you are done with coding

- When all trials of the experiment are coded, save the spreadsheet into the same folder (`analysis/data_coding/`), but change its name to 
`CODED_<participantID>_<experiment-name>.csv`
-  Now is a good moment to do a `git push`


## File encoding issues

Special characters like Swedish umlauts can create problems when you open files which either expect, or by default use, different encoding conventions. It is good practice to use "UTF-8" (or Unicode) encoding. However, Excel will expect input in Western (Windows 1252) and it will save files in that format unless told to do otherwise.

To find out the encoding of a specific file:
a) Open the file in Sublime Text
b) Click on View > Show Console
c) A small white console shows up at the bottom of the screen.
d) In the lowest row (the one that accepts written input), type in the command "view.encoding()" and press return
e) Sublime will tell you the encoding of the file
f) Use this information when you open the file in Excel, i.e. if the file encoding is Western (Windows 1252), then use this option when you import the file as text in Excel (see Step 4 above under "When you start coding the data from a new participant")
g) You can also, in Sublime, go to File > Save with encoding > UTF-8. That will save the file in UTF-8 format

NB: For some reason the data files in `analysis/data_coding/`, which are created with the R script `analysis/pilot-data_preprocess.R`, are not recognized by Sublime as being encoded in UTF-8 format, even though the R-script does specify that. GMM doesn't understand why, so let us just be pragmatic about this:

Make sure that the final coded version of the data is in "UTF-8". Follow step g in the list here above to achieve it.
